# mermaidEdit 项目问题清单

## 概述

本文档记录了在分析 PRD.md 过程中发现的不清晰、存在矛盾或需要进一步说明的问题，供项目开发和决策参考。

## 问题分类

### 1. KV 存储信息字段不明确

**问题描述**：PRD.md 第 28 行提到"KV 存储信息字段请自行补充"，但未明确具体需要哪些字段。

**具体疑问**：

- KV 存储信息需要包含哪些具体字段？（如：KV 命名空间、访问令牌、端点 URL 等）
- 这些字段是否与用户配置中的模型信息分开存储？
- KV 存储配置是否也是可选的，因为云端同步是可选功能？

**影响范围**：

- 用户配置界面设计
- 数据结构设计
- 云端同步功能实现

**优先级**：高（影响核心功能实现）

**回答**

- 移除配置功能

### 2. AI 辅助功能的实现方式不清晰

**问题描述**：PRD.md 第 104 行提到"AI 辅助功能通过弹窗或临时替换编辑器模式实现"，但具体实现方式不明确。

**具体疑问**：

- AI 辅助功能的具体交互流程是什么？是弹窗输入后生成内容替换当前编辑器内容，还是在编辑器旁边显示 AI 建议？
- "自动生成一个专业的 mermaid 图表 prompt" - 这个 prompt 是固定的还是可配置的？
- AI 功能失败时如何优雅降级？是否会影响核心编辑功能？

**影响范围**：

- AI 辅助功能设计
- 用户界面交互
- 错误处理机制

**优先级**：中（AI 功能标记为可选，后期实现）

**回答**

- 移除 AI 辅助功能

### 3. 数据同步机制细节缺失

**问题描述**：云端同步功能描述较为笼统，缺乏具体的同步策略。

**具体疑问**：

- 同步是手动触发还是自动触发？文档提到"手动同步"，但又有"自动保存编辑内容到本地"
- 冲突检测的具体机制是什么？如何定义"冲突"？
- 同步状态的三种状态（本地修改/已同步/同步失败）之间的转换条件和时机是什么？

**影响范围**：

- 数据同步功能实现
- 用户体验设计
- 数据一致性保证

**优先级**：高（影响数据可靠性）

**回答**

- 移除同步云端的功能，仅保留自动保存编辑内容到本地

### 4. 技术栈选择合理性

**问题描述**：选择原生 TypeScript 而非框架可能会增加开发复杂度。

**具体疑问**：

- 为什么选择原生 TypeScript 而不是 React/Vue 等现代框架？是出于性能考虑还是减少依赖？
- 使用原生 TypeScript 如何管理组件状态和生命周期？
- 是否考虑过使用轻量级框架如 Preact 或 Svelte？

**影响范围**：

- 技术架构设计
- 开发效率
- 代码维护性

**回答**

- 使用 React

**优先级**：中（技术选型决策）

### 5. 图表列表功能的具体实现

**问题描述**：图表列表功能的交互细节不明确。

**具体疑问**：

- 图表列表中的"是否已同步到云端"状态如何实时更新？
- 图表名称是否有长度限制或命名规则？
- 列表中是否支持搜索、筛选或排序功能？

**影响范围**：

- 图表管理功能
- 用户界面设计
- 数据展示逻辑

**优先级**：中（影响用户体验）

**回答**

- 移除同步功能
- 图表名称最多 20 个字
- 列表按创建时间倒序排列

### 6. 导出功能的技术细节

**问题描述**：导出功能的实现方式不明确。

**具体疑问**：

- PNG/SVG 导出是否支持自定义尺寸和分辨率？
- "压缩优化"具体指什么优化策略？
- 导出时是否包含图表的样式信息？

**影响范围**：

- 导出功能实现
- 输出质量
- 用户需求满足度

**优先级**：中（核心功能之一）

**回答**

- 导出不需要自定义尺寸和分辨率
- 移除压缩优化相关内容
- 导出时需要包含图表样式

### 7. 错误处理的具体实现

**问题描述**：错误处理策略描述较为笼统。

**具体疑问**：

- "定期尝试重新保存失败的数据" - 这个"定期"是多久？
- "提供并排比较界面让用户选择" - 这个界面的具体设计是什么样的？
- 语法检查和自动修复建议的实现机制是什么？

**影响范围**：

- 错误处理机制
- 用户体验
- 数据安全性

**优先级**：高（影响产品稳定性）

**回答**

- 导出不需要自定义尺寸和分辨率
- 移除"提供并排比较界面让用户选择"相关内容
- 移除语法检查和自动修复建议相关内容

### 8. 用户体验的具体标准

**问题描述**："有品味的界面设计"过于主观。

**具体疑问**：

- 界面设计的具体风格指南是什么？（如：颜色方案、字体、间距等）
- 响应式设计的要求是什么？是否需要支持移动端？
- 无障碍访问（Accessibility）是否有具体要求？

**影响范围**：

- 界面设计
- 用户体验
- 产品一致性

**优先级**：中（影响产品感知质量）

**回答**

- 不需要支持移动端
- 不需要支持无障碍访问

## 问题优先级排序

### 高优先级（影响核心功能或稳定性）

1. KV 存储信息字段不明确
2. 数据同步机制细节缺失
3. 错误处理的具体实现

### 中优先级（影响用户体验或开发效率）

4. AI 辅助功能的实现方式不清晰
5. 技术栈选择合理性
6. 图表列表功能的具体实现
7. 导出功能的技术细节
8. 用户体验的具体标准

## 建议解决顺序

1. **第一阶段**：解决高优先级问题，确保核心功能可实现
   - 明确 KV 存储字段
   - 设计数据同步机制
   - 定义错误处理策略

2. **第二阶段**：解决中优先级问题，优化用户体验和开发效率
   - 确认技术栈选择
   - 设计图表列表交互
   - 明确导出功能细节
   - 定义用户体验标准

3. **第三阶段**：AI 辅助功能设计（作为可选功能）

## 后续行动

- [ ] 与产品负责人确认 KV 存储字段需求
- [ ] 设计详细的数据同步机制文档
- [ ] 制定错误处理策略规范
- [ ] 评估技术栈选择的合理性
- [ ] 创建详细的 UI/UX 设计规范
- [ ] 定期回顾此问题清单，跟踪问题解决进度

---

**文档创建时间**：2025-08-18  
**最后更新时间**：2025-08-18  
**负责人**：待定  
**状态**：初稿完成，待确认
